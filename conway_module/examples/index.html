<!doctype html>
<html lang="en">
	<head>
		<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
		<meta charset="utf-8">
		<title>Conway's Game of Life</title>
		<style>
			#grid_canvas {
				border: 1px solid black;
				background-color: #e1e2e1;
			}

			.container{
				display: flex;
				background-color:#e1e2e1;
			}

			.col{
				flex-direction: column;
			}

			.row{
				flex-direction: row;
				padding-top: 10px;
			}

			body{
				background-color: #000000;
				font-family: 'Roboto', sans-serif;
			}

			#simulation_controls{
				padding-left: 10px;
				margin-bottom: 10px;
			}

			#block{
				height: 24px;
				background-color: #006db3
			}
			#header{
				background-color: #039be5;
				border-top-width: 1px;
				border-top-color: #3fafe8;
				border-top-style: solid;
			}

			h1{
				color: #000000;
				margin-left: 20px;
			}
		</style>
	</head>
	<script src="./../dist/conways-game.js"></script>
	<body>
		<div class="container col">
			<div id='block'></div>
			<div id='header'>
				<h1>Conway's Game Of Life</h1>
			</div>
			<div>
				<canvas id="grid_canvas"></canvas>
			</div>
			<div id='simulation_controls'>
				<div class="container row">
					<button id="start_button" onclick="start_simulation();">Start New World</button>
					<button id="stop_button" onclick="stop_simulation();">Stop</button>
					<button id="resume_button" onclick="resume_simulation();">Resume</button>
				</div>
				<div class="container row">
					<input type="checkbox" id="display_storage" name="display_storage" onclick="toggle_display_storage_structure();"/>
					<label for="display_quad_tree">Display Storage Structure</label>

					<input type="checkbox" id="display_grid_background" name="display_grid_background" onclick="toggle_display_grid_background();"/>
					<label for="display_grid_background">Display Grid</label>
				</div>
			</div>
		</div>

		<script type="application/javascript">
			let LifeSystem = Conways.LifeSystem
			let config = Conways.DefaultConfig

			let canvas = document.getElementById('grid_canvas')

			//Override the default configuration to size the HTML Canvas
			//to fit the document. Note: This will use the same padding/margins
			//as the HTML Body.
			let blockElement = document.getElementById('header')
			let headerElement = document.getElementById('header')
			let simControlsElement = document.getElementById('simulation_controls')
			config.canvas.width = document.body.clientWidth
			config.canvas.height = window.innerHeight - (blockElement.clientHeight + headerElement.clientHeight + simControlsElement.clientHeight)

			//config.zoom = ?
			config.landscape.width = config.canvas.width/config.zoom
			config.landscape.height = config.canvas.height/config.zoom

			canvas.setAttribute('width', config.canvas.width)
			canvas.setAttribute('height', config.canvas.height)
			let ctx = canvas.getContext('2d')
			let life = new LifeSystem(window, ctx, config)
			life.main(window.performance.now());

			function start_simulation(){
				life.start()
			}

			function stop_simulation(){
				life.stop()
			}

			function resume_simulation(){
				life.resume()
			}

			function toggle_display_storage_structure(){
				let displayStorageCheckbox = document.getElementById('display_storage')
				life.displayStorage(displayStorageCheckbox.checked)
			}

			function toggle_display_grid_background(){
				let displayGridBackground = document.getElementById('display_grid_background')
				life.displayGrid(displayGridBackground.checked)
			}
		</script>
	</body>
</html>
